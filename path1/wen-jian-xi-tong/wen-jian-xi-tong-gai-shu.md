# 5.1 文件系统概述

交换机和路由器用一个并行Flash作为辅助存储器存储文件，Flash是一个可读可写的存储器，设备断电后，Flash的内容不会丢失，所以在交换机和路由器中Flash可被当作硬盘使用，用于存放需要长期保存的信息。

Flash中的文件主要包括：

## 1、主体文件

这个文件相当于交换机或路由器的操作系统，它的扩展名一般为 bin 或 upd，bin 文件是一个单独的文件，而 upd 文件是由多个文件打包而成，包含了 bin 文件和Web配置等文件。

主体文件很大，一般存放在Flash的根目录中。它是管理软件运行的主程序，如果该文件被删除或被破坏，设备将不能启动，开机后会进入ROM模式。

## 2、启动配置文件

这个文件由CLI命令组成，文件名一般为 config.text，它是一个文本文件。该文件就是我们在命令行中使用的 startup-config，在设备启动时，该文件被装入RAM成为 running-config，设备执行其中的CLI命令完成初始化。

新设备是没有config.text文件的，此时，设备所有参数都采用缺省配置，有些种类的设备在启动时会进入 setup 模式，用户配置一些基本参数后，就生成了config.text文件。

你也可以在特权模式下用 setup 命令来初始化配置文件，它可以清除原来的配置文件，生成一个只有几项基本参数的配置文件。

## 几点说明：

1. 文件名对大小写不敏感，文件名长度不能超过23个字符。
2. 不要删除主程序文件，它会导致设备不能启动。
3. 可以删除启动配置文件，用这种方法可以把设备恢复到缺省状态。
4. Flash中的文件有两种状态：激活状态和删除状态。当删除一个文件时，该文件只是被标记为删除，但仍然在Flash中，我们可以使用碎片整理功能把处于删除状态的文件彻底删除，腾出空间保存新文件。

